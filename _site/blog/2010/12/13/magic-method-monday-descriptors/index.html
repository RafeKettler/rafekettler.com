


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    
  <title>rafekettler.com</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
<link rel="alternate" type="application/atom+xml" title="Atom 1.0"
href="/blog/feed/atom" />
<link rel='stylesheet' href='/css/pygments_tango.css' type='text/css' />
<link rel='stylesheet' href='/css/site.css' type='text/css' />


  </head>
  <body>
    <div id="content">
      
  <h1><a href="/">rafekettler.com</a></h1>
<h3>My thoughts on programming and technology</h3>
<nav>
<ul>
<li><a href="/blog">Blog</a></li>
<li><a href="/about.html">About me</a></li>
<li><a href="/magicmethods.html">Magic Methods Guide</a></li>
</ul>
</nav>
<hr/>


      <div id="main_block">
        <div id="prose_block">
          

<div class="blog_post">
  <a name="magic-method-monday-descriptors"></a>
  <h2 class="blog_post_title"><a href="/blog/2010/12/13/magic-method-monday-descriptors" rel="bookmark" title="Permanent Link to Magic Method Monday: Descriptors">Magic Method Monday: Descriptors</a></h2>
  <p><small>12.13.2010 at 04:19 AM in 

<a href='/blog/category/python'>Python</a>, <a href='/blog/category/programming'>Programming</a>, <a href='/blog/category/magic-method-monday'>Magic Method Monday</a>
 | <a href="http://www.rafekettler.com/blog/2010/12/13/magic-method-monday-descriptors#disqus_thread">View Comments</a>
</small></p>
  <div class="post_prose">
    
  <p>Descriptors are classes which, when accessed through either getting, setting, or deleting, can also alter other objects. Descriptors aren't meant to stand alone; rather, they're meant to be held by an owner class. Descriptors can be useful when building object-oriented databases or classes that have attributes whose values are dependent on each other.</p>
<p>To be a descriptor, a class must have at least one of <code>__get__</code>, <code>__set__</code>, and <code>__delete__</code> implemented. Let's take a look at those magic methods:</p>
<p><code>__get__</code></p>
<p><code>__get__</code> defines behavior for when the descriptor's value is retrieved. <code>__get__</code> takes three arguments: <code>self</code>, the instance of the owner class (<code>instance</code>), and the owner class itself (<code>owner</code>).</p>
<p><code>__set__</code></p>
<p><code>__set__</code></p>
<p><code>__set__</code> gets called when the value of the descriptor is changed. It takes three arguments also: <code>self</code>, the instance of the owner class, and the value to set the descriptor to.</p>
<p><code>__delete__</code></p>
<p><code>__delete__</code> gets called when the descriptor (or the instance of the owner) is deleted (either through garbage collection or a <code>del</code> statement), and it takes <code>self</code> and the instance of the owner class.</p>
<p><strong>Example</strong></p>
<p>If one were defining a class to represent distance (or any other measurement), it might be useful to have multiple units of measurement represented. An example could look like this:</p>
<div class="pygments_tango"><pre><span class="k">class</span> <span class="nc">Meter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
    <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<p><span class="k">class</span> <span class="nc">Foot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf"><strong>get</strong></span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="n">meter</span> <span class="o">/</span> <span class="o">.</span><span class="mi">3048</span>
    <span class="k">def</span> <span class="nf"><strong>set</strong></span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">meter</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="mf">3.2808</span></p>
<p><span class="k">class</span> <span class="nc">Distance</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">meter</span> <span class="o">=</span> <span class="n">Meter</span><span class="p">()</span>
    <span class="n">foot</span> <span class="o">=</span> <span class="n">Foot</span><span class="p">()</span>
</pre></div></p>
<p>In this case, <code>Meter</code> and <code>Foot</code> are descriptors, and <code>Distance</code> is the owner class. Descriptors are useful because they can tie values and other aspects of their state to other descriptors, making them an excellent way to simply and beautify code. Without descriptors in this example, the implementation of the conversions would have to be contained in <code>Distance</code>, which would not only bloat the class definition for <code>Distance</code>, but make <code>Foot</code> and <code>Meter</code> specific to <code>Distance</code>. By defining <code>__get__</code>, <code>__set__</code>, and <code>__delete__</code>, however, we can reuse <code>Foot</code> and <code>Meter</code> in any class that has some attribute for distance. All in all, it's a great way to write reusable, effortless code that can add functionality and beauty to classes that hold them.</p>

  </div>
</div>



<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_url = "http://www.rafekettler.com/blog/2010/12/13/magic-method-monday-descriptors";
</script>
<script type="text/javascript" src="http://disqus.com/forums/rafekettler.com/embed.js"></script>
<noscript><a href="http://rafekettler.com.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

        </div><!-- End Prose Block -->
      </div><!-- End Main Block -->
      <div id="footer">
        
  <hr/>
  <p id="credits">
Copyright &copy; Rafe Kettler, 2010-11<br/>
Powered by <a href="http://www.blogofile.com">Blogofile</a>.<br/>
RSS feeds for <a href="/blog/feed">Entries</a>
 and <a
href="http://rafekettler.com.disqus.com/latest.rss">Comments</a>.
<br>
</p>
<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/rafekettler.com/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>


      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>



















