


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    
  <title>rafekettler.com</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
<link rel="alternate" type="application/atom+xml" title="Atom 1.0"
href="/blog/feed/atom" />
<link rel='stylesheet' href='/css/pygments_tango.css' type='text/css' />
<link rel='stylesheet' href='/css/site.css' type='text/css' />


  </head>
  <body>
    <div id="content">
      
  <h1><a href="/">rafekettler.com</a></h1>
<h3>My thoughts on programming and technology</h3>
<nav>
<ul>
<li><a href="/blog">Blog</a></li>
<li><a href="/about.html">About me</a></li>
<li><a href="/magicmethods.html">Magic Methods Guide</a></li>
</ul>
</nav>
<hr/>


      <div id="main_block">
        <div id="prose_block">
          

<div class="blog_post">
  <a name="magic-method-monday-__new__-__init__-and-__del__"></a>
  <h2 class="blog_post_title"><a href="/blog/2010/11/01/magic-method-monday-__new__-__init__-and-__del__" rel="bookmark" title="Permanent Link to Magic Method Monday: __new__, __init__, and __del__">Magic Method Monday: __new__, __init__, and __del__</a></h2>
  <p><small>11.01.2010 at 05:37 AM in 

<a href='/blog/category/python'>Python</a>, <a href='/blog/category/magic-method-monday'>Magic Method Monday</a>
 | <a href="http://www.rafekettler.com/blog/2010/11/01/magic-method-monday-__new__-__init__-and-__del__#disqus_thread">View Comments</a>
</small></p>
  <div class="post_prose">
    
  <p>I'm starting a little thing called Magic Method Monday (3M for short, I suppose), in which I delve into some of the mysterious, double-underscore encased "magic methods" that make object-oriented programming in Python work. Some of the earlier magic methods (like today's) are a bit basic, but hopefully in due time I'll have a chance to delve into some of the underused and misunderstood magic methods that hide away in the annals of the Python language.</p>
<p>Without further adieu, here are today's magic methods:</p>
<p><code>__new__</code></p>
<p><code>__new__</code> is the first method called when an object is instantiated. It takes the class as an argument and passes any arguments that the instance was created with to our next magic method, <code>__init__</code>. <code>__new__</code> is also useful for creating immutable instance variables. <code>__new__</code> isn't used very often, however.</p>
<p><code>__init__</code></p>
<p><code>__init__</code> does the initialization work for an object, and is the most commonly used magic method in object-oriented Python programming. Most all classes define <code>__init__</code>. <code>__init__</code> always takes <code>self</code> as a first argument.</p>
<p>Together, <code>__new__</code> and <code>__init__</code> make up the constructor for a class. Now, you might ask, what makes up the destructor?</p>
<p><code>__del__</code></p>
<p><code>__del__</code> can be defined in a class definition to create special behavior for the destruction of an instance of a class. <code>__del__</code> also takes <code>self</code> as a first and only argument.</p>
<p>Now, time for a (somewhat ridiculous) example. Say you wanted to implement a class that represents a file object that can be read from or written to. You'd need to define <code>__init__</code> to initialize the instance variables correctly and <code>__del__</code> to make sure the file stream is closed when the object is no longer needed. Here is a basic prototype for that class:</p>
<div class="pygments_tango"><pre><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>

<p><span class="k">class</span> <span class="nc">FileObject</span><span class="p">:</span></p>
<pre><code>&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;filepath&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;/home/user_name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;sample.txt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c"&gt;# open a file filename in filepath in read and write mode&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filepath&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;rw&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__del__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;
</code></pre>
<p></pre></div></p>
<p>In this case, <code>__del__</code> was used to make sure that the file connection was closed when all was said and done.</p>
<p>Tune in next week for more magic methods. Thanks for reading.</p>

  </div>
</div>



<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_url = "http://www.rafekettler.com/blog/2010/11/01/magic-method-monday-__new__-__init__-and-__del__";
</script>
<script type="text/javascript" src="http://disqus.com/forums/rafekettler.com/embed.js"></script>
<noscript><a href="http://rafekettler.com.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

        </div><!-- End Prose Block -->
      </div><!-- End Main Block -->
      <div id="footer">
        
  <hr/>
  <p id="credits">
Copyright &copy; Rafe Kettler, 2010-11<br/>
Powered by <a href="http://www.blogofile.com">Blogofile</a>.<br/>
RSS feeds for <a href="/blog/feed">Entries</a>
 and <a
href="http://rafekettler.com.disqus.com/latest.rss">Comments</a>.
<br>
</p>
<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/rafekettler.com/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>


      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>



















